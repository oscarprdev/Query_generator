generator client {
  provider        = "prisma-client-js"
  previewFeatures = ["driverAdapters"]
  engineType = "library"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

enum Databases {
    mongoDb
    postgreSQL
}

enum PostgresType {
    text
    integer
    bigint
    real
    boolean
    date
    json
}

enum MongoType {
    string
    number
    boolean
    date
    object
    array
}

enum PostgreConstraint {
    primaryKey
    foreignKey
    notNull
    unique
}

enum MongoConstraint {
    primaryKey
    unique
}

model Project {
    id                String              @id @default(uuid()) @unique
    title             String              @unique
    createdAt         DateTime            @default(now()) @unique
    updatedAt         DateTime            @updatedAt

    database          Databases           
}

model PostgreTable {
    id                String              @id @default(uuid()) @unique
    title             String              @unique
    createdAt         DateTime            @default(now()) @unique
    updatedAt         DateTime            @updatedAt

    rows              PostgreRow[]
}

model MongoTable {
    id                String              @id @default(uuid()) @unique
    title             String              @unique
    createdAt         DateTime            @default(now()) @unique
    updatedAt         DateTime            @updatedAt

    rows              MongoRow[]
}

model PostgreRow {
    id                String              @id @default(uuid()) @unique
    tableId           String              @unique
    value             String              
    type              PostgresType
    constraints       PostgreConstraint

    table             PostgreTable        @relation(fields: [tableId], references: [id], onDelete: Cascade)
}

model MongoRow {
    id               String               @id @default(uuid()) @unique
    tableId          String
    value            String
    type             MongoType
    constraints      MongoConstraint

    table            MongoTable          @relation(fields: [tableId], references: [id], onDelete: Cascade)
}